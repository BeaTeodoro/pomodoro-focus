<!DOCTYPE html>
<html lang="pt-br" data-theme="light">

<head>
  <meta charset="UTF-8" />

  <!-- Tema inicial -->
  <script>
    (() => {
      try {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
      } catch {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pomodoro Focus | Entrar</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" type="image/png" href="img/favicon.png" />
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <img src="img/favicon.png" alt="Logo Pomodoro" />
      <h1>Pomodoro Focus</h1>
    </div>

    <!-- ‚úÖ Bot√£o do menu mobile adicionado -->
    <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menu">
      <i class="ph ph-list"></i>
    </button>

    <div class="header-actions">
      <div class="theme-switch">
        <i class="ph ph-sun"></i>
        <label class="switch">
          <input type="checkbox" id="theme-toggle" />
          <span class="slider"></span>
        </label>
        <i class="ph ph-moon"></i>
      </div>
      <a href="login.html" class="btn-login"><i class="ph ph-sign-in"></i> Entrar</a>
    </div>
  </header>

  <!-- Navega√ß√£o -->
  <nav class="subnav" id="mobile-menu">
    <div class="tabs">
      <a href="index.html" class="tab active">Como Funciona</a>
      <a href="cronometro.html" class="tab">Cron√¥metro</a>
      <a href="musica.html" class="tab">M√∫sica</a>
      <a href="estatisticas.html" class="tab">Estat√≠sticas</a>
    </div>
  </nav>

  <!-- Conte√∫do principal -->
  <main class="login-page">
    <section class="login-container">

      <!-- Login -->
      <div class="login-box" id="login-box">
        <h2><i class="ph ph-user-circle"></i> Bem-vindo de volta</h2>
        <p>Entre com e-mail ou Google</p>

        <form id="login-form">
          <div class="form-group">
            <label for="email"><i class="ph ph-envelope"></i> E-mail</label>
            <input type="email" id="email" placeholder="exemplo@email.com" required />
          </div>

          <div class="form-group">
            <label for="password"><i class="ph ph-lock"></i> Senha</label>
            <input type="password" id="password" placeholder="********" required />
          </div>

          <button type="submit" class="btn-login">Entrar</button>
        </form>

        <p class="or-separator">‚Äî ou ‚Äî</p>
        <button id="google-login" class="btn-google">
          <i class="ph ph-google-logo"></i> Entrar com Google
        </button>

        <p class="no-account">
          N√£o tem uma conta?
          <a href="cadastro.html" id="open-signup">Cadastre-se</a>
        </p>
      </div>

      <!-- Cadastro embutido (opcional) -->
      <div class="signup-box" id="signup-box">
        <h2><i class="ph ph-user-plus"></i> Criar conta</h2>

        <form id="signup-form">
          <div class="form-group">
            <label for="fullName"><i class="ph ph-identification-card"></i> Nome completo</label>
            <input type="text" id="fullName" required />
          </div>

          <div class="form-group">
            <label for="location"><i class="ph ph-map-pin"></i> Local</label>
            <input type="text" id="location" />
          </div>

          <div class="form-group">
            <label for="age"><i class="ph ph-calendar"></i> Idade</label>
            <input type="number" id="age" min="10" max="100" />
          </div>

          <div class="form-group photo-upload">
            <label for="photoFile"><i class="ph ph-image"></i> Foto de perfil</label>
            <div class="photo-preview">
              <img id="photoPreview" src="img/default-avatar.svg" alt="Pr√©via da foto" />
              <label for="photoFile" class="btn-upload">Escolher imagem</label>
              <input type="file" id="photoFile" accept="image/*" hidden />
            </div>
          </div>

          <div class="form-group">
            <label for="signupEmail"><i class="ph ph-envelope"></i> E-mail</label>
            <input type="email" id="signupEmail" required />
          </div>

          <div class="form-group">
            <label for="signupPassword"><i class="ph ph-lock"></i> Senha</label>
            <input type="password" id="signupPassword" required />
          </div>

          <button type="submit" class="btn-login">Cadastrar</button>
          <p><a href="#" id="back-to-login">Voltar ao login</a></p>
        </form>
      </div>
    </section>
  </main>

  <!-- Footer com mini-player -->
  <footer class="footer" aria-label="Rodap√©">
    <div class="footer-content container">
      <div class="mini-player-footer" aria-label="Mini player do Spotify">
        <i class="ph ph-spotify-logo spotify-icon" aria-hidden="true"></i>

        <div class="player-buttons" role="group" aria-label="Controles do mini player">
          <button id="mini-prev" title="Anterior" type="button"><i class="ph ph-skip-back"></i></button>
          <button id="mini-play" class="play-btn" title="Tocar/Pausar" type="button"><i class="ph ph-play"></i></button>
          <button id="mini-next" title="Pr√≥xima" type="button"><i class="ph ph-skip-forward"></i></button>

          <!-- volume popover que abre pra cima -->
          <div class="mini-volume">
            <button id="mini-vol-btn" class="vol-btn" title="Volume" type="button"><i
                class="ph ph-speaker-high"></i></button>
            <div class="mini-volume-pop" aria-hidden="true">
              <input id="mini-volume-range" type="range" min="0" max="100" value="70" orient="vertical"
                aria-label="Volume do mini player" />
            </div>
          </div>
        </div>

        <div class="mini-track-info">
          <p class="track-title">T√≠tulo da m√∫sica</p>
          <span class="track-artist">Artista</span>
          <div class="mini-progress-bar" aria-label="Progresso" role="progressbar" aria-valuemin="0" aria-valuemax="100"
            aria-valuenow="0">
            <div class="progress-fill"></div>
          </div>
        </div>
      </div>

      <p class="footer-center">
        ¬© 2025 <strong>Pomodoro Focus</strong> ‚Äî Desenvolvido por <strong>Beatriz Teodoro</strong> üçÖ
      </p>

      <div class="social-links" aria-label="Redes sociais">
        <a href="https://www.linkedin.com/in/beatrizateodoro" target="_blank" aria-label="LinkedIn"
          rel="noopener noreferrer">
          <i class="ph ph-linkedin-logo"></i>
        </a>
        <a href="https://github.com/BeaTeodoro" target="_blank" aria-label="GitHub" rel="noopener noreferrer">
          <i class="ph ph-github-logo"></i>
        </a>
      </div>
    </div>
  </footer>

  <!-- Scripts principais -->
  <script type="module">
    import { loginWithEmail } from "./js/emailAuth.js";
    import { loginWithGoogle } from "./js/auth.js";
    import { signUpWithEmailAndPhoto } from "./js/emailAuth.js";

    const loginBox = document.getElementById("login-box");
    const signupBox = document.getElementById("signup-box");

    // Estado inicial
    window.addEventListener("DOMContentLoaded", () => {
      signupBox.classList.remove("active");
      loginBox.classList.remove("hidden");
    });

    // Alternar login/cadastro
    document.getElementById("open-signup").addEventListener("click", () => {
      loginBox.classList.add("hidden");
      signupBox.classList.add("active");
    });

    document.getElementById("back-to-login").addEventListener("click", () => {
      signupBox.classList.remove("active");
      loginBox.classList.remove("hidden");
    });

    // Login por e-mail
    document.getElementById("login-form").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      await loginWithEmail(email, password);
    });

    // Login com Google
    document.getElementById("google-login").addEventListener("click", loginWithGoogle);

    // Cadastro com upload
    document.getElementById("signup-form").addEventListener("submit", async (e) => {
      e.preventDefault();
      const fullName = document.getElementById("fullName").value;
      const location = document.getElementById("location").value;
      const age = document.getElementById("age").value;
      const email = document.getElementById("signupEmail").value;
      const password = document.getElementById("signupPassword").value;
      const photoFile = document.getElementById("photoFile").files[0];

      await signUpWithEmailAndPhoto(email, password, fullName, location, age, photoFile);
    });

    // Pr√©-visualiza√ß√£o da foto
    document.getElementById("photoFile").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        document.getElementById("photoPreview").src = URL.createObjectURL(file);
      }
    });
  </script>

  <!-- Scripts globais -->
  <script src="js/theme.js"></script>
  <script src="js/header.js"></script>
  <script type="module" src="js/userHeader.js"></script>
  <script type="module" src="js/spotify.js"></script>
  <script type="module" src="js/miniPlayer.js"></script>
  <iframe id="player-core" src="player-core.html"
    style="width:0;height:0;border:0;position:absolute;opacity:0;"></iframe>

</body>

</html>